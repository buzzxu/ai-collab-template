# AI 协作角色配置
# 定义 AI 能力、MBTI 人格和工作流分配
#
# 使用说明:
# 1. 根据项目需求调整 roles 中的 AI 配置
# 2. 在 workflows.modules 中配置各模块的默认分配
# 3. 在 audit_rules 中定义交叉审计规则

version: "1.0"

# ============================================
# 角色定义
# ============================================

roles:
  claude:
    name: "Claude"
    variants:
      opus:
        name: "Claude Opus"
        strengths: [architecture, planning, complex-reasoning]
      sonnet:
        name: "Claude Sonnet"
        strengths: [implementation, speed, balance]
    capabilities:
      - implement      # 代码实现
      - review         # 代码审查
      - plan           # 架构规划
      - document       # 文档编写
      - audit          # 质量审计
    mbti: [ENTJ, ISTJ, ENTP]
    tools:
      - claude-code    # 原生 Skills 支持
      - native-skills
    notes: "全能型，可承担任何角色"

  gemini:
    name: "Gemini Pro"
    capabilities:
      - review         # 代码审查
      - research       # 技术调研
      - audit          # 质量审计
      - plan           # 方案设计
    mbti: [ENTP, ENTJ]
    tools:
      - manual-sop     # 需手动执行 SOP
      - web-search     # 联网搜索能力强
    notes: "擅长批判性分析和技术调研"

  codex:
    name: "Codex CLI"
    capabilities:
      - implement      # 代码实现
      - test           # 测试编写
      - refactor       # 代码重构
    mbti: [ISTJ]
    tools:
      - codex-cli
      - manual-sop
    notes: "专注实现，适合明确需求的任务"

  cursor:
    name: "Cursor"
    capabilities:
      - implement
      - refactor
    mbti: [ISTJ]
    tools:
      - cursor-ide
    notes: "IDE 集成，适合交互式开发"

  # 添加更多 AI 角色...
  # custom_ai:
  #   name: "Custom AI"
  #   capabilities: [implement]
  #   mbti: [ISTJ]
  #   tools: [manual-sop]

# ============================================
# 工作流默认分配
# ============================================

workflows:
  # 全局默认 (当模块未配置时使用)
  default:
    implement: claude      # 实现任务优先分配
    audit: gemini          # 审计任务优先分配
    plan: claude           # 规划任务优先分配
    review: gemini         # 代码审查优先分配
    document: claude       # 文档编写优先分配

  # 按模块覆盖 (根据项目调整)
  modules:
    frontend:
      implement: codex
      audit: gemini

    backend:
      implement: claude
      audit: gemini

    docs:
      implement: claude
      audit: null          # 文档无需审计

    # 添加项目特有模块...
    # mobile:
    #   implement: cursor
    #   audit: claude

# ============================================
# MBTI 角色映射
# ============================================

mbti_mapping:
  ENTJ:
    role: "战略规划者"
    responsibilities:
      - 架构设计
      - 技术选型
      - 方案规划
      - 优先级排序
    preferred_ai: [claude-opus, gemini]

  ISTJ:
    role: "编码实现者"
    responsibilities:
      - 代码实现
      - 规范执行
      - 测试编写
      - 文档完善
    preferred_ai: [claude-sonnet, codex]

  ENTP:
    role: "质询改进者"
    responsibilities:
      - 方案评审
      - 代码审查
      - 风险识别
      - 优化建议
    preferred_ai: [gemini, claude-opus]

# ============================================
# 审计规则
# ============================================

audit_rules:
  # 交叉审计: 实现者不能审计自己的代码
  cross_audit: true

  # 审计矩阵 (实现者 -> 可选审计者列表)
  matrix:
    claude: [gemini, codex]
    gemini: [claude]
    codex: [gemini, claude]
    cursor: [gemini, claude]

  # 默认审计者 (当矩阵无匹配时)
  fallback: gemini
