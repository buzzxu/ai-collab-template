# MEMORY.md - 项目长期记忆 (所有 AI 共享)

> **用途**: 统一的项目上下文锚点，供 Claude / Gemini / Codex 等所有 AI 共同使用
> **更新日期**: {{DATE}}
> **版本**: 1.0

---

## 1. 项目身份

| 属性 | 值 |
|------|-----|
| **名称** | {{PROJECT_NAME}} |
| **定位** | {{PROJECT_DESCRIPTION}} |
| **仓库** | {{REPO_URL}} |

### 技术栈

| 层级 | 技术选型 |
|------|----------|
| 前端 | {{FRONTEND_STACK}} |
| 后端 | {{BACKEND_STACK}} |
| 数据库 | {{DATABASE_STACK}} |

---

## 2. 文档地图

### 任务管理 (SSOT)

| 路径 | 说明 |
|------|------|
| `project/roles.yaml` | AI 角色配置 |
| `project/tasks/_schema.yaml` | 任务 Schema |
| `project/tasks/*.yaml` | 各模块任务 |

### AI 协作文件

| 文件 | 用途 |
|------|------|
| `CLAUDE.md` | Claude 工作指南 |
| `GEMINI.md` | Gemini 专用上下文 |
| `MEMORY.md` | 统一长期记忆 (本文件) |
| `.context/session.md` | AI 交接文档 |

---

## 3. 协作模式 (Skills + 角色配置)

### 配置优先级

```
命令行参数 > 任务级 > 模块级 defaults > 全局 roles.yaml
```

### 核心 Skills

| 命令 | 功能 |
|------|------|
| `/task-start <id>` | 开始任务 |
| `/task-done <id>` | 完成任务 |
| `/handoff <ai>` | AI 交接 |
| `/sync` | 进度同步 |

### MBTI 人格分工

| MBTI | 角色 | 职责 |
|------|------|------|
| ENTJ | 战略规划者 | 架构设计、技术选型 |
| ISTJ | 编码实现者 | 代码实现、测试编写 |
| ENTP | 质询改进者 | 代码审查、风险识别 |

### 通用调用协议 (UIP)

非 Claude 的 AI 请按 SOP 执行：

```
1. 读取角色配置: project/roles.yaml
2. 读取任务文件: project/tasks/{module}.yaml
3. 确定角色分配 (优先级: 任务级 > 模块级 > 全局级)
4. 检查 depends_on 状态
5. 验证交叉审计规则
6. 更新 status 和 assignee
7. 执行任务
8. 完成后更新 status: completed
```

详见: `.claude/skills/*.md`

---

## 4. 当前进度

> 运行 `/sync` 查看详细进度

| 阶段 | 状态 | 说明 |
|------|------|------|
| Phase 1 | 🔄 进行中 | {{CURRENT_PHASE}} |

---

## 5. 快速上下文同步

**给新 AI 的指令**:

```
请先阅读以下文件了解项目:
1. MEMORY.md - 项目长期记忆 (本文件)
2. project/roles.yaml - 角色配置
3. project/tasks/*.yaml - 任务状态
4. .claude/skills/*.md - 协作命令

运行 /sync 查看当前进度
```

---

## 6. 决策记录

| 日期 | 决策 | 理由 |
|------|------|------|
| {{DATE}} | 采用 AI 协作模板 | 标准化多 AI 协作流程 |

---

## 7. 更新日志

| 日期 | 变更 |
|------|------|
| {{DATE}} | 初始版本 |
